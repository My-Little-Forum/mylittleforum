function MyLittleAdmin(){var a=function(){var g=document.getElementById("settings");if(!g){return}var h=function(i,f){if(i&&document.getElementById(i+"_label")){document.getElementById(i+"_label").className=f?"active":"inactive"}};var c=function(f){for(var j=0;j<f.length;j++){h(f[j].id,f[j].checked)}};for(var d=0;d<g.elements.length;d++){var e=g.elements[d];if(e.type=="checkbox"||e.type=="radio"){e.onchange=function(i){var f=g.elements[this.name];if(f){if(typeof f.length!="number"){f=[f]}c(f)}}}}};var b=function(){var c=document.getElementById("selectioncontrols");var j=document.getElementById("selectform");if(!c||!j){return}var g=j.elements["delete_backup_files[]"];if(g&&typeof g.length!="number"){g=[g]}var l=j.getElementsByTagName("a");for(var h=0;h<l.length;h++){if(l[h].href.search("delete_backup_files")!=-1){l[h].onclick=function(f){var i=window.confirm(lang.delete_backup_confirm);if(i){this.href+="&delete_backup_files_confirm="+true}this.blur();return i}}}var e=function(n){for(var f=0;f<g.length;f++){g[f].checked=n}};j.onsubmit=function(n){var o=false;for(var f=0;f<g.length;f++){if((o=g[f].checked)!=false){break}}if(!o){return false}o=window.confirm(lang.delete_sel_backup_confirm);if(o&&this.elements.delete_backup_files_confirm){this.elements.delete_backup_files_confirm.value=true}return o};var k=document.createElementWithAttributes("span",{className:"checkall"},c);var m=document.createElementWithAttributes("a",{onclick:function(f){e(this.setSelect);return false},href:"#",setSelect:true},k);k.appendChild(document.createTextNode(" / "));var d=document.createElementWithAttributes("a",{onclick:function(f){e(this.setSelect);return false},href:"#",setSelect:false},k);m.appendChild(document.createTextNode(lang.check_all));d.appendChild(document.createTextNode(lang.uncheck_all))};(function(){a();b()}())}function DragAndDropTable(p){if(!p){return}var m=false;var q=p.tBodies[0].rows;var d=null;var h=window.document.onmouseup;var j=window.document.onmousemove;var k=0;var e=[];var c=function(t){var u=window.document.location.search.substring(1).split("&");if(!u.length){return false}for(var s=0;s<u.length;s++){var r=u[s].split("=");if(decodeURIComponent(r[0])==t){return r.length>1?decodeURIComponent(r[1]):""}}};var l=function(){if(!m){return}var t=c("action");var r=g();if(!t||!r){return}var s=[new Query("mode","admin"),new Query("action","reorder"),new Query(t,r)];new Request("index.php","POST",s)};var f=function(){for(var r=0;r<q.length;r++){q[r].className=(r%2==0)?"a":"b"}};var g=function(){var r="";for(var s=0;s<q.length;s++){if(q[s].id.length>3){r+=q[s].id.substring(3)+","}}return r.substr(0,r.length-1)};var o=function(r){if(!r){return}};var i=function(r){if(!r){return}f();l()};var b=function(){window.document.onmousemove=function(u){if(typeof j=="function"){j(u)}if(!d){return}var v=document.getMousePos(u);var s=v.top-d.handlePos.top+d.elementPos.top;var t=a(s);if(k!=s&&t&&d!=t){var r=s>k;k=s;if(r){t=t.nextSibling}d.parentNode.insertBefore(d,t);m=true;o(d)}if(u&&u.preventDefault){u.preventDefault()}return false};window.document.onmouseup=function(r){window.document.onmouseup=window.document.onmousemove=null;if(typeof h=="function"){h(r)}if(typeof j=="function"){window.document.onmousemove=j}i(d);d=null;m=false;return false}};var a=function(u){for(var r=0;r<q.length;r++){var t=document.getElementPoSi(q[r]);var s=t.height;if(s==0&&row[r].firstChild){t=document.getElementPoSi(row[r].firstChild);s=row[r].firstChild.offsetHeight}s/=2;if((u>=(t.top-s))&&(u<(t.top+s))){return q[r]}}return null};var n=function(t){t.classList.add("js-cursor-move");t.title=lang.drag_and_drop_title;t.onmousedown=function(v){m=false;var u=document.getTarget(v);if(u&&u.className.search(/control/)!=-1){return false}this.className="drag";this.elementPos=document.getElementPoSi(this);this.handlePos=document.getMousePos(v);d=this;b();return false};var r=t.cells[t.cells.length-1].getElementsByTagName("a");if(r&&r.length>0){for(var s=0;s<r.length;s++){if(r[s].href.search(/move_up/)!=-1){r[s].onclick=function(u){t.parentNode.insertBefore(t,q[Math.max(t.rowIndex-2,0)]);m=true;f();l();return false}}else{if(r[s].href.search(/move_down/)!=-1){r[s].onclick=function(u){t.parentNode.insertBefore(t,q[Math.min(t.rowIndex+1,q.length)]);f();m=true;l();return false}}}}}};(function(){for(var r=0;r<q.length;r++){n(q[r])}}())}window.ready.push(function(){new MyLittleAdmin();new DragAndDropTable(document.getElementById("sortable"))});