document.getStyle=function(b,a){if(b.currentStyle){return b.currentStyle[a]}else{if(window.getComputedStyle){return document.defaultView.getComputedStyle(b,null).getPropertyValue(a)}}return false};if(typeof document.getElementsByClassName!="function"){document.getElementsByClassName=function(f){var b,e=new Array(),c=0,g;if(this.all){b=this.all}else{if(this.getElementsByTagName&&!this.all){b=this.getElementsByTagName("*")}}var a=b.length;for(var d=0;d<a;d++){if(b[d].className.indexOf(f)!=-1){g=","+b[d].className.split(" ").join(",")+",";if(g.indexOf(","+f+",")!=-1){e[c]=b[d];c++}}}return e}}document.preloadImages=function(a,d){if(typeof a!="object"){a=[a]}d=d||"";var b=[];for(var c=0;c<a.length;c++){b[c]=new Image();b[c].src=d+a[c]}};document.getTarget=function(a){a=a||window.event;return a.target||a.srcElement||false};if(window.Node&&Node.prototype&&!Node.prototype.contains){Node.prototype.contains=function(a){try{return !!(this.compareDocumentPosition(a)&16)}catch(b){return false}}}document.createInputElementWithAttributes=function(d,f,i){if(d.toLowerCase()!="input"&&d.toLowerCase()!="button"){return document.createElementWithAttributes(d,f,i)}var h=f.type||false;var a=f.name||false;var c=false;if(h){try{c=document.createElement(d);c.type=h;if(a){c.name=a}}catch(e){var g=" type="+h+(a?" name="+a:"");c=document.createElement("<"+d+g+">")}}c=c||document.createElement(d);for(var b in f){if(b.toLowerCase()!="type"&&b.toLowerCase()!="name"){c[b]=f[b]}}if(i){i.appendChild(c)}return c};document.createElementWithAttributes=function(c,b,a){if(c.toLowerCase()=="input"||c.toLowerCase()=="button"){return document.createInputElementWithAttributes(c,b,a)}var d=document.createElement(c);for(var e in b){d[e]=b[e]}if(a){a.appendChild(d)}return d};document.getScrollPosition=function(){var a=0,b=0;if(typeof window.pageYOffset=="number"){b=window.pageYOffset;a=window.pageXOffset}else{if(document.compatMode&&document.compatMode=="CSS1Compat"){b=document.documentElement.scrollTop;a=document.documentElement.scrollLeft}else{if(document.body&&typeof document.body.scrollLeft=="number"&&typeof document.body.scrollTop=="number"){b=document.body.scrollTop;a=document.body.scrollLeft}}}return{left:a,top:b}};document.getWindowSize=function(){var a,d,c,f;if(window.innerHeight&&window.scrollMaxY){a=document.body.scrollWidth;d=window.innerHeight+window.scrollMaxY}else{if(document.body.scrollHeight>document.body.offsetHeight){a=document.body.scrollWidth;d=document.body.scrollHeight}else{a=document.getElementsByTagName("html").item(0).offsetWidth;d=document.getElementsByTagName("html").item(0).offsetHeight;a=(a<document.body.offsetWidth)?document.body.offsetWidth:a;d=(d<document.body.offsetHeight)?document.body.offsetHeight:d}}if(window.innerHeight){c=window.innerWidth;f=window.innerHeight}else{if(document.compatMode&&document.compatMode=="CSS1Compat"){c=document.documentElement.clientWidth;f=document.documentElement.clientHeight}else{if(document.body){c=document.getElementsByTagName("html").item(0).clientWidth;f=document.getElementsByTagName("html").item(0).clientHeight;c=(c==0)?document.body.clientWidth:c;f=(f==0)?document.body.clientHeight:f}}}var e=(d<f)?f:d;var b=(a<c)?c:a;return{pageWidth:b,pageHeight:e,windowWidth:c,windowHeight:f}};document.getKeyCode=function(a){a=a||window.event;if((typeof a.which=="undefined"||(typeof a.which=="number"&&a.which==0))&&typeof a.keyCode=="number"){return a.keyCode}else{return a.which}};document.getElementPoSi=function(a){var b={top:0,left:0,width:0,height:0};if(!a||typeof(a)!="object"){return b}if(typeof(a.offsetTop)!="undefined"){b.height=a.offsetHeight;b.width=a.offsetWidth;b.left=b.top=0;while(a&&a.tagName!="BODY"){b.top+=parseInt(a.offsetTop);b.left+=parseInt(a.offsetLeft);a=a.offsetParent}}return b};document.getFirstChildByElement=function(d,c,b){if(b&&typeof(b)!="object"){b=[b]}if(d&&d.hasChildNodes()){var e=d.firstChild;while(e!=null){if(e.nodeName.toLowerCase()==c){if(!b){return e}else{var f=","+e.className.split(" ").join(",")+",";for(var a=0;a<b.length;a++){if(f.indexOf(","+b[a]+",")!=-1){return e}}}}e=e.nextSibling}}return null};document.getMousePos=function(b){b=b||window.event;var a=(window.document.compatMode&&window.document.compatMode=="CSS1Compat")?window.document.documentElement:window.document.body;return{top:b.pageY?b.pageY:b.clientY+a.scrollTop-a.clientTop,left:b.pageX?b.pageX:b.clientX+a.scrollLeft-a.clientLeft}};if(typeof String.prototype.trim!="function"){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}String.prototype.containsLineBreak=function(){var a=new RegExp(/(\n|\r|\r\n)./);return a.test(this)};String.prototype.stripslashes=function(){var a=this;a=a.replace(/\\'/g,"'");a=a.replace(/\\"/g,'"');a=a.replace(/\\0/g,"\0");a=a.replace(/\\\\/g,"\\");return a};function DragAndDropTable(p,l,i){if(!p){return}var e=false;var j=p.tBodies[0].rows;var r=null;var s=window.document.onmouseup;var k=window.document.onmousemove;var b=0;var f=[];var a=function(w){var x=window.document.location.search.substring(1).split("&");if(!x.length){return false}for(var u=0;u<x.length;u++){var t=x[u].split("=");if(decodeURIComponent(t[0])==w){return t.length>1?decodeURIComponent(t[1]):""}}};var g=function(){if(!e){return}var v=a(i);var t=h();if(!v||!t){return}var u=[new Query("mode",l),new Query("action","reorder"),new Query(v,t)];new Request("index.php","POST",u)};var o=function(){for(var t=0;t<j.length;t++){j[t].className=(t%2==0)?"a":"b"}};var h=function(){var t="";for(var u=0;u<j.length;u++){if(j[u].id.length>3){t+=j[u].id.substring(3)+","}}return t.substr(0,t.length-1)};var d=function(t){if(!t){return}};var q=function(t){if(!t){return}o();g()};var c=function(){window.document.onmousemove=function(w){if(typeof k=="function"){k(w)}if(!r){return}var x=document.getMousePos(w);var u=x.top-r.handlePos.top+r.elementPos.top;var v=n(u);if(b!=u&&v&&r!=v){var t=u>b;b=u;if(t){v=v.nextSibling}r.parentNode.insertBefore(r,v);e=true;d(r)}if(w&&w.preventDefault){w.preventDefault()}return false};window.document.onmouseup=function(t){window.document.onmouseup=window.document.onmousemove=null;if(typeof s=="function"){s(t)}if(typeof k=="function"){window.document.onmousemove=k}q(r);r=null;e=false;return false}};var n=function(w){for(var t=0;t<j.length;t++){var v=document.getElementPoSi(j[t]);var u=v.height;if(u==0&&row[t].firstChild){v=document.getElementPoSi(row[t].firstChild);u=row[t].firstChild.offsetHeight}u/=2;if((w>=(v.top-u))&&(w<(v.top+u))){return j[t]}}return null};var m=function(v){v.classList.add("js-cursor-move");v.title=lang.drag_and_drop_title;v.onmousedown=function(x){e=false;var w=document.getTarget(x);if(w&&w.className.search(/control/)!=-1){return false}this.className="drag";this.elementPos=document.getElementPoSi(this);this.handlePos=document.getMousePos(x);r=this;c();return false};var t=v.cells[v.cells.length-1].getElementsByTagName("a");if(t&&t.length>0){for(var u=0;u<t.length;u++){if(t[u].href.search(/move_up/)!=-1){t[u].onclick=function(w){v.parentNode.insertBefore(v,j[Math.max(v.rowIndex-2,0)]);e=true;o();g();return false}}else{if(t[u].href.search(/move_down/)!=-1){t[u].onclick=function(w){v.parentNode.insertBefore(v,j[Math.min(v.rowIndex+1,j.length)]);o();e=true;g();return false}}}}}};(function(){for(var t=0;t<j.length;t++){m(j[t])}}())}var ready=new (function(){var g=0,f=document,b=window,c=this,a;c.isReady=0;c.readyList=[];function e(){if(g){return}g=1;if(f.addEventListener){a="DOMContentLoaded";f.addEventListener(a,function(){f.removeEventListener(a,arguments.callee,false);ready.ready()},false)}else{if(f.attachEvent){a="onreadystatechange";f.attachEvent(a,function(){if(f.readyState==="complete"){f.detachEvent(a,arguments.callee);ready.ready()}});if(f.documentElement.doScroll&&b==b.top){(function(){if(c.isReady){return}try{f.documentElement.doScroll("left")}catch(d){setTimeout(arguments.callee,0);return}ready.ready()})()}}}b.onload=ready.ready}c.ready=function(){if(!c.isReady){c.isReady=1;if(c.readyList){for(var d=0;d<c.readyList.length;d++){c.readyList[d].call(b,c)}c.readyList=null}f.loaded=true}};c.push=function(d){e();if(c.isReady){d.call(b,c)}else{c.readyList.push(d)}return c}})();function Query(b,a){a=a||"";var c=b.trim();var d=encodeURIComponent(a.toString().trim());this.toString=function(){return c+"="+d+"&"}}function Request(c,h,a,n,g,p,d,b){p=p?(typeof p=="object"||typeof p=="function"?p:[p]):[];d=d||false;b=b?b:d?"text/xml":"text/plain";n=n||null;var l=false;try{if(window.XMLHttpRequest){l=new XMLHttpRequest()}if(l.overrideMimeType){l.overrideMimeType(b)}else{if(window.ActiveXObject){try{l=new ActiveXObject("Msxml2.XMLHTTP")}catch(o){try{l=new ActiveXObject("Microsoft.XMLHTTP")}catch(r){l=false}}}}}catch(j){l=false}if(!l){if(n&&typeof n[g]=="function"){n[g](false,p)}return}var f="";if(a instanceof Query){f=a.toString()}else{if((typeof a=="object"||typeof a=="function")&&a.length>0){for(var k=0;k<a.length;k++){f+=a[k].toString()}}}f+=new Date().getTime();l.abort();l.onreadystatechange=function(){if(l.readyState==4){if(n&&typeof n[g]=="function"){n[g]((d?l.responseXML:l.responseText),p)}l=false}};if(h.toLowerCase()=="post"){l.open("POST",c,true);l.setRequestHeader("Content-Type","application/x-www-form-urlencoded");l.send(f)}else{l.open("GET",c+"?"+f,true);l.send(null)}}function Sidebar(f){f=f||"";var a=document.getElementById("sidebar")||document.getElementById("bottombar")||false;var e=document.getElementById("sidebartoggle");var c=this;if(!a||!e){return}this.setVisible=function(g){if(g){a.classList.remove("js-display-fold");e.src=f+settings.hide_sidebar_image;e.classList.remove("show-sidebar");e.classList.add("hide-sidebar")}else{a.classList.add("js-display-fold");e.src=f+settings.show_sidebar_image;e.classList.remove("hide-sidebar");e.classList.add("show-sidebar")}};this.isVisible=function(){return !a.classList.contains("js-display-fold")};var b=a.getElementsByTagName("a");for(var d=0;d<b.length;d++){if(b[d].href.search(/toggle_sidebar/)!=-1){b[d].onclick=function(g){c.setVisible(!c.isVisible());new Request("index.php","POST",new Query("toggle_sidebar",true));return false}}}}function Thread(h,l){var e=false;if(!isNaN(parseInt(h))){e=h;h=document.getElementById("thread-"+e)}else{var f=new RegExp(/thread-([0-9])+/);var a=f.exec(h.id);if(!a){return}e=a&&a.length>1?a[1]:0}var n=h.getElementsByTagName("li");var m=h.getElementsByTagName("ul");var o=this;var k=new Image();var b=null;if(h.parentNode.nodeName!="TD"){var g=document.getFirstChildByElement(n[0],"span",["tail"]);if(g&&n.length>1){b=document.getFirstChildByElement(g,"span",["replies"]);if(!b){b=document.createElementWithAttributes("span",{className:"replies"},g);b.appendChild(document.createTextNode(" ("+(n.length-1)+")"))}}}this.isFold=function(){return m.length>0&&m[0].classList.contains("js-display-none")};this.setFold=function(q,p){p=p||false;if(q){k.src=l+settings.expand_thread_image;k.classList.remove("fold-thread");k.classList.add("expand-thread");k.alt="";k.onerror=function(s){this.alt="[+]"};k.title=lang.expand_fold_thread_linktitle;if(b){b.classList.remove("js-display-none")}if(p){h.classList.remove("expanded");h.classList.add("folded")}}else{k.src=l+settings.fold_thread_image;k.classList.remove("expand-thread");k.classList.add("fold-thread");k.alt="";k.onerror=function(s){this.alt="[-]"};k.title=lang.expand_fold_thread_linktitle;if(b){b.classList.add("js-display-none")}if(p){h.classList.remove("folded");h.classList.add("expanded")}}for(var r=0;r<m.length;r++){if(q){m[r].classList.add("js-display-none")}else{m[r].classList.remove("js-display-none")}}};var c=function(p){if(!p){return}if(n.length>0&&n[0].firstChild){n[0].insertBefore(p,n[0].firstChild)}else{n[0].appendChild(p)}};var d=document.createElementWithAttributes("span",{className:"fold-expand"},null);if(n.length==1){var i=document.createElementWithAttributes("img",{src:l+settings.expand_thread_inactive_image,className:"expand-thread-inactive",alt:"",onerror:function(p){this.alt="[]"}},d);c(d)}else{var j=document.createElementWithAttributes("a",{href:"#",onclick:function(p){o.setFold(!o.isFold());this.blur();return false}},d);this.setFold(this.isFold());j.appendChild(k);c(d)}}function Posting(b){if(!b){return}var d=document.getElementById("p"+b);var c=document.getElementById("headline-"+b);if(!d||!c){return}var a=this;c.classList.add("js-cursor-pointer");c.title=lang.fold_posting_title;c.onclick=function(f){a.setFold(!a.isFold())};this.isFold=function(){return d.classList.contains("js-display-fold")};this.setFold=function(e){if(e){d.classList.add("js-display-fold")}else{d.classList.remove("js-display-fold")}};this.setFold(this.isFold())}function FullSizeImage(els){if(!els){return}els=(typeof els=="object"||typeof els=="function")&&typeof els.length=="number"?els:[els];var hashTrigger=null;var body=document.body;var isIELower8=
/*@cc_on!@*/
false&&!(document.documentMode&&document.documentMode>=8);var imageCanvas=document.getElementById("image-canvas")||document.createElementWithAttributes("div",{id:"image-canvas"},body);imageCanvas.setVisible=function(visible){if(visible){this.classList.remove("js-display-none")}else{this.classList.add("js-display-none")}};var stopTrigger=function(){if(hashTrigger){window.clearInterval(hashTrigger);var scrollPos=document.getScrollPosition();if(!isIELower8){window.history.back()}else{window.location.hash="GET_OPERA"}window.scrollTo(scrollPos.left,scrollPos.top)}};var oldOnKeyPressFunc=window.document.onkeypress;window.document.onkeypress=function(e){var keyCode=document.getKeyCode(e);if(keyCode==27){imageCanvas.setVisible(false);stopTrigger()}if(typeof oldOnKeyPressFunc=="function"){oldOnKeyPressFunc(e)}};imageCanvas.onclick=function(e){imageCanvas.setVisible(false);stopTrigger()};imageCanvas.setVisible(false);var fullSizeImage=document.getElementById("fullSizeImage")||document.createElementWithAttributes("img",{id:"fullSizeImage"},imageCanvas);for(var i=0;i<els.length;i++){var links=els[i].getElementsByTagName("a");for(var j=0;j<links.length;j++){if(links[j].rel.search(/thumbnail/)!=-1){links[j].onclick=function(e){window.location.hash="image";var currentHash=window.location.hash;fullSizeImage.src=this.href;imageCanvas.setVisible(true);var imgPoSi=document.getElementPoSi(fullSizeImage);var scrollPos=document.getScrollPosition();var winSize=document.getWindowSize();imageCanvas.style.height=winSize.pageHeight+"px";fullSizeImage.style.marginTop=(scrollPos.top+(winSize.windowHeight-imgPoSi.height)/2)+"px";hashTrigger=window.setInterval(function(){if(this.location.hash!=currentHash){imageCanvas.setVisible(false)}},50);return false}}}}}function AjaxPreviewWindow(d,o){o=o?o:"";var f=false;var p=false;var i=document.getElementById("ajax-preview");var q=this;if(!i){i=document.createElementWithAttributes("div",{id:"ajax-preview",className:"js-display-none"},null);document.body.appendChild(i)}i.innerHTML=d.stripslashes().trim();var k=null;var m=0;var g=document.getElementById("ajax-preview-close");var b=document.getElementById("ajax-preview-content");var n=document.getElementById("ajax-preview-main");if(!g||!b||!n){console.log("main.js: Fail to init ajax-Elements!")}var j=window.document.onmousedown;window.document.onmousedown=function(r){q.closeByOutSideClick(r);if(typeof j=="function"){j(r)}};var l=window.document.onkeypress;window.document.onkeypress=function(s){var r=document.getKeyCode(s);if(r==27){q.setVisible(false)}if(typeof l=="function"){l(s)}};if(settings.ajax_preview_onmouseover){var c=window.document.onmouseover;window.document.onmouseover=function(r){if(!q.isPinned()){q.closeByOutSideClick(r)}if(typeof c=="function"){c(r)}}}g.onclick=function(){q.setVisible(false);return false};var a=document.createElementWithAttributes("img",{id:"ajax-preview-throbber",src:o+settings.ajax_preview_throbber_image,alt:"[*]"},b);var h=document.createElementWithAttributes("p",{id:"ajax-preview-replylink-wrapper",className:"js-display-none"},b);var e=document.createElementWithAttributes("a",{id:"ajax-preview-replylink",href:"#"},null);e.appendChild(document.createTextNode(lang.reply_link));this.closeByOutSideClick=function(w){var A=document.getElementById("image-canvas");if(q.isVisible()&&A&&A.classList.contains("js-display-none")){var u=document.getTarget(w);if(u&&u!=q.getOpener().firstChild&&u!=q.getContentElement()&&u!=q.getMainElement()){var t=document.getMousePos(w);var s=t.left;var r=t.top;var z=q.getDocumentPosition().left;var y=q.getDocumentPosition().top;var v=q.getWidth();var x=q.getHeight();if((s<z||s>(z+v)||r<y||r>(y+x))&&u.className!="ap"){q.setVisible(false)}}}};this.pin=function(){p=!p};this.isPinned=function(){return p};this.getContentElement=function(){return b};this.getMainElement=function(){return n};this.hideURI=function(r){f=r};this.setPosition=function(s,u){i.style.left=s+"px";i.style.top=u+"px";var t=this.getWidth();var r=document.getWindowSize().windowWidth;if((s+t)>=r){this.moveHorizontal(r-25-(s+t))}else{this.moveHorizontal(0)}};this.getWidth=function(){return n.offsetWidth};this.getHeight=function(){return i.offsetHeight+n.offsetHeight};this.setOpener=function(r){k=r};this.getOpener=function(){return k};this.isVisible=function(){return !i.classList.contains("js-display-none")};this.getDocumentPosition=function(){var s=i.offsetLeft;var r=i.offsetTop;return{top:r,left:s+m}};this.moveHorizontal=function(r){m=r;n.style.left=r+"px"};this.setVisible=function(r){if(r){i.classList.remove("js-display-none");i.classList.add("js-display-block")}else{i.classList.remove("js-display-block");i.classList.add("js-display-none");p=false}};this.setText=function(r){b.innerHTML=r;if(r!=""){if(!e.firstChild){e.appendChild(document.createTextNode(lang.reply_link))}if(!f){h.appendChild(e);b.appendChild(h)}new FullSizeImage(b)}else{b.appendChild(a)}};this.setURI=function(r){if(!r){e.href="#";h.classList.remove("js-display-block");h.classList.add("js-display-none")}else{h.classList.remove("js-display-none");h.classList.add("js-display-block");e.href=r}}}function MyLittleJavaScript(){var t=null;var j=null;var i=null;var v="index.php";var q=[];var b=[];var g=new RegExp(/[?|&]id=([0-9]+)(#p([0-9]+))?/);var l=this;var e=function(w){if(w&&g.test(w.href)){var x=g.exec(w.href);return x[3]?x[3]:x[1]}return false};this.getTemplatePath=function(){if(t!=null){return t}var x=document.getElementsByTagName("link");for(var w=0;w<x.length;w++){if(x[w].rel=="stylesheet"){return x[w].href.substring(0,x[w].href.lastIndexOf("/")+1)}}return""};var o=function(y){var x=document.createElementWithAttributes("a",{pid:y,title:lang.ajax_preview_title,href:v+"?id="+y,onclick:function(z){l.showAjaxPreviewWindow(this,true);this.blur();return false},onmouseover:function(z){if(settings.ajax_preview_onmouseover){l.showAjaxPreviewWindow(this,false);this.blur()}return false},tabIndex:-1},null);var w=document.createElementWithAttributes("img",{src:t+settings.ajax_preview_image,title:lang.ajax_preview_title,alt:"",onload:function(z){this.alt="[…]"},onerror:function(z){this.alt="[…]"}},x);return x};var f=function(x){if(!x||!j){return}var w=e(x);if(w&&x.parentNode){x.parentNode.appendChild(document.createTextNode(String.fromCharCode(160)));x.parentNode.appendChild(o(w))}};var c=function(x){if(!x||!j){return}j.hideURI(true);var y=document.getElementById("postingform");var w=false;if(y&&y.elements.id){w=parseInt(y.elements.id.value)}if(w){x.appendChild(document.createTextNode(String.fromCharCode(160)));x.appendChild(o(w))}};this.selectPosting=function(x,w){var y=w&&(typeof w=="object"||typeof w=="function")&&w.length>0;var B=y?w[0]:x;var A=y?x:false;var z=null;if(!B||!(z=document.getElementById("markimg_"+B))){return}z.src=t+settings.mark_process_image;z.alt="[ ]";var C=[new Query("mode","posting"),new Query("mark",B),new Query("method","ajax")];if(!y){new Request(v,"POST",C,this,"selectPosting",B,true)}else{if(y&&A&&document.getElementById("marklink_"+B)){var D=document.getElementById("marklink_"+B);var E=A.getElementsByTagName("action")&&A.getElementsByTagName("action")[0].firstChild.data=="1";if(E){z.src=t+settings.marked_image;z.alt="[●]";D.title=lang.unmark_linktitle;z.title=lang.unmark_linktitle}else{z.src=t+settings.unmarked_image;z.alt="[○]";D.title=lang.mark_linktitle;z.title=lang.mark_linktitle}}}};var h=function(y){y=y||false;for(var x=0;x<q.length;x++){q[x].setFold(!y,true)}var w=[new Query("fold_threads",y?"0":"1"),new Query("ajax","true")];new Request(v,"GET",w)};var u=function(){if(!document.getElementById("subnavmenu")){return}var y=document.getElementById("subnavmenu").getElementsByTagName("a");var z=null;var B=new RegExp(/fold-([0-9])+/);for(var x=0;x<y.length;x++){if(y[x].className.search(B)!=-1){z=y[x];break}}if(z){var A=B.exec(z.className);var w=A.length>1&&A[1]=="1";z.onclick=function(C){h(!w);this.className=this.className.replace(B,"fold-"+(w?2:1));this.firstChild.replaceData(0,this.firstChild.nodeValue.length,(w?lang.expand_threads:lang.fold_threads));this.title=w?lang.expand_threads_linktitle:lang.fold_threads_linktitle;w=!w;this.blur();return false}}};var p=function(B){if(!B){return}u();for(var C=0;C<B.length;C++){var w=B[C];var G=w.parentNode;var z=document.getFirstChildByElement(G,"a",["ap","reply","thread","replynew","threadnew","thread-sticky","threadnew-sticky","reply-search","thread-search","thread-locked"]);var E=!!document.getFirstChildByElement(G,"img",["no-text"]);var D=parseInt(w.id.substring(1));if(!D){continue}var H=w.getElementsByTagName("a");if(H.length>=2){for(var A=0;A<H.length;A++){if(H[A].href.search(/mark/)!=-1){H[A].pid=D;H[A].onclick=function(I){l.selectPosting(this.pid);this.blur();return false}}else{if(H[A].href.search(/delete_posting/)!=-1){H[A].onclick=function(I){var J=window.confirm(lang.delete_posting_confirm);if(J){this.href+="&delete_posting_confirm=true"}this.blur();return J}}}}}if(!E&&z&&j){if(H.length>=1){var F=H[0];w.insertBefore(o(D),F);w.insertBefore(document.createTextNode(String.fromCharCode(160)),F)}else{w.appendChild(document.createTextNode(String.fromCharCode(160)));w.appendChild(o(D))}}if(G.parentNode.className.search(/thread/)!=-1&&G.parentNode.className.search(/[folded|expanded]/)!=-1){q.push(new Thread(G.parentNode,t))}}var y=document.getElementsByClassName("options");if(y.length>0){for(var C=0;C<y.length;C++){var H=y[C].getElementsByTagName("a");if(H.length>0){for(var A=0;A<H.length;A++){if(H[A].href.search(/delete_posting/)!=-1){H[A].onclick=function(I){var J=window.confirm(lang.delete_posting_confirm);if(J){this.href+="&delete_posting_confirm=true"}return J};break}}}}}var x=document.getElementsByClassName("posting");x=x.length>0?x:document.getElementsByClassName("thread-posting");new FullSizeImage(x)};var r=function(y){var w=document.getElementById(y);if(!w){return}var x=(w.alt)?w.alt:w.value;w.onfocus=function(z){if(this.value==x){this.value=""}};w.onblur=function(z){if(this.value.trim()==""){this.value=x}}};var d=function(){if(document.getElementById("content")){var x=document.getElementById("content").getElementsByTagName("form");if(x&&x.length>0){for(var w=0;w<x[0].elements.length;w++){if(x[0].elements[w].type=="text"&&x[0].elements[w].name!="search_user"&&x[0].elements[w].name!="smiley_code"&&x[0].elements[w].name!="new_category"){x[0].elements[w].focus();break}}}}};var n=function(){if(document.getElementById("content")){var B=document.getElementById("content").getElementsByTagName("form");if(B&&B.length>0){var C=[];for(var z=0;z<B.length;z++){var x=B[z].getElementsByTagName("input");for(var y=0;y<x.length;y++){if(x[y].type=="password"){var A=x[y];var w=document.createElementWithAttributes("input",{type:"checkbox",checked:false,value:false,field:A,title:lang.show_password_title},A.parentNode);w.onclick=function(E){var D=this.field.type=="text";this.value=D;this.title=D?lang.show_password_title:lang.hide_password_title;this.field.type=D?"password":"text"}}}}}}};var a=function(x){x=x||false;for(var w=0;w<b.length;w++){b[w].setFold(!x)}};var k=function(z){if(!z){return}for(var y=0;y<z.length;y++){var A=z[y];var x=parseInt(A.id.substring(1));if(!x){continue}b.push(new Posting(x))}var C=null;if(b.length==0||!(C=document.getElementById("subnavmenu"))){return}var w=document.createElementWithAttributes("li",{},C);var B=document.createElementWithAttributes("a",{isExpand:true,title:lang.fold_postings_title,href:"#",className:"fold-postings"},w);B.appendChild(document.createTextNode(lang.fold_postings));B.onclick=function(D){this.isExpand=!this.isExpand;a(this.isExpand);this.blur();return false}};var m=function(){var B=[[document.getElementById("terms_of_use")||false,settings.terms_of_use_popup_width,settings.terms_of_use_popup_height],[document.getElementById("data_privacy_statement")||false,settings.terms_of_use_popup_width,settings.terms_of_use_popup_height],[document.getElementById("edit_avatar")||false,settings.avatar_popup_width,settings.avatar_popup_height]];for(var A=0;A<B.length;A++){if(B[A][0]){var D=document.getWindowSize();var y=B[A][1];var C=B[A][2];var x=parseInt(0.5*(D.windowWidth-y));var z=parseInt(0.25*(D.windowHeight-C));B[A][0].onclick=function(w){window.open(this.href,"MyLittleForum","width="+y+",height="+C+",left="+x+",top="+z+",scrollbars,resizable");return false}}}};this.updateAjaxPreviewWindow=function(w){if(w===false||!j){return}var x=w.getElementsByTagName("content");var y=w.getElementsByTagName("locked");y=!y?true:y[0].firstChild.data=="1";x=!x?"":x[0].firstChild.data;if(y){j.setURI(false)}else{if(j.getOpener()&&j.getOpener().pid){j.setURI("index.php?mode=posting&id="+j.getOpener().pid)}}if(x.trim()==""){x="<p>"+lang.no_text+"</p>"}j.setText(x)};this.showAjaxPreviewWindow=function(z,y){if(!z||!j){return}if(z==j.getOpener()&&j.isVisible()&&y){j.pin();if(!j.isPinned()){j.setVisible(false);j.setOpener(null)}}else{if(!j.isPinned()){if(y&&!j.isPinned()){j.pin()}var x=document.getElementPoSi(z);j.setOpener(z);j.setText("");j.setVisible(true);j.setPosition(x.left,x.top);var w=[new Query("mode","entry"),new Query("ajax_preview","true"),new Query("id",z.pid)];new Request(v,"POST",w,this,"updateAjaxPreviewWindow",null,true)}}};this.getAjaxPreviewWindow=function(){return j};var s=function(){var x=document.getElementById("subnav-2");if(x){var A=x.getElementsByTagName("form");for(var z=0;z<A.length;z++){var y=A[z].getElementsByTagName("select");for(var w=0;w<y.length;w++){y[w].f=A[z];y[w].onchange=function(B){this.f.submit();return false}}}}};this.init=function(w){w=w||false;d();r("search-input");r("search-user");t=this.getTemplatePath();if(w){j=new AjaxPreviewWindow(w,t)}f(document.getElementById("user-last-posting"));c(document.getElementById("reply-to"));p(document.getElementsByClassName("tail"));k(document.getElementsByClassName("thread-posting"));m();s();i=new Sidebar(t);n();if(typeof preload=="object"){document.preloadImages(preload,t)}}}var mlf=null;window.ready.push(function(){mlf=new MyLittleJavaScript();var a=typeof settings!="undefined"&&typeof settings.ajaxPreviewStructure=="string"?settings.ajaxPreviewStructure:false;if(mlf&&typeof lang=="object"){mlf.init(a)}new DragAndDropTable(document.getElementById("sortable"),"bookmarks","mode")});