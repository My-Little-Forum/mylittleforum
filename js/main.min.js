document.getStyle=function(b,a){if(b.currentStyle){return b.currentStyle[a]}else{if(window.getComputedStyle){return document.defaultView.getComputedStyle(b,null).getPropertyValue(a)}}return false};if(typeof document.getElementsByClassName!="function"){document.getElementsByClassName=function(f){var b,e=new Array(),c=0,g;if(this.all){b=this.all}else{if(this.getElementsByTagName&&!this.all){b=this.getElementsByTagName("*")}}var a=b.length;for(var d=0;d<a;d++){if(b[d].className.indexOf(f)!=-1){g=","+b[d].className.split(" ").join(",")+",";if(g.indexOf(","+f+",")!=-1){e[c]=b[d];c++}}}return e}}document.preloadImages=function(a,d){if(typeof a!="object"){a=[a]}d=d||"";var b=[];for(var c=0;c<a.length;c++){b[c]=new Image();b[c].src=d+a[c]}};document.getTarget=function(a){a=a||window.event;return a.target||a.srcElement||false};if(window.Node&&Node.prototype&&!Node.prototype.contains){Node.prototype.contains=function(a){try{return !!(this.compareDocumentPosition(a)&16)}catch(b){return false}}}document.createInputElementWithAttributes=function(d,f,i){if(d.toLowerCase()!="input"&&d.toLowerCase()!="button"){return document.createElementWithAttributes(d,f,i)}var h=f.type||false;var a=f.name||false;var c=false;if(h){try{c=document.createElement(d);c.type=h;if(a){c.name=a}}catch(e){var g=" type="+h+(a?" name="+a:"");c=document.createElement("<"+d+g+">")}}c=c||document.createElement(d);for(var b in f){if(b.toLowerCase()!="type"&&b.toLowerCase()!="name"){c[b]=f[b]}}if(i){i.appendChild(c)}return c};document.createElementWithAttributes=function(c,b,a){if(c.toLowerCase()=="input"||c.toLowerCase()=="button"){return document.createInputElementWithAttributes(c,b,a)}var d=document.createElement(c);for(var e in b){d[e]=b[e]}if(a){a.appendChild(d)}return d};document.getScrollPosition=function(){var a=0,b=0;if(typeof window.pageYOffset=="number"){b=window.pageYOffset;a=window.pageXOffset}else{if(document.compatMode&&document.compatMode=="CSS1Compat"){b=document.documentElement.scrollTop;a=document.documentElement.scrollLeft}else{if(document.body&&typeof document.body.scrollLeft=="number"&&typeof document.body.scrollTop=="number"){b=document.body.scrollTop;a=document.body.scrollLeft}}}return{left:a,top:b}};document.getWindowSize=function(){var a,d,c,f;if(window.innerHeight&&window.scrollMaxY){a=document.body.scrollWidth;d=window.innerHeight+window.scrollMaxY}else{if(document.body.scrollHeight>document.body.offsetHeight){a=document.body.scrollWidth;d=document.body.scrollHeight}else{a=document.getElementsByTagName("html").item(0).offsetWidth;d=document.getElementsByTagName("html").item(0).offsetHeight;a=(a<document.body.offsetWidth)?document.body.offsetWidth:a;d=(d<document.body.offsetHeight)?document.body.offsetHeight:d}}if(window.innerHeight){c=window.innerWidth;f=window.innerHeight}else{if(document.compatMode&&document.compatMode=="CSS1Compat"){c=document.documentElement.clientWidth;f=document.documentElement.clientHeight}else{if(document.body){c=document.getElementsByTagName("html").item(0).clientWidth;f=document.getElementsByTagName("html").item(0).clientHeight;c=(c==0)?document.body.clientWidth:c;f=(f==0)?document.body.clientHeight:f}}}var e=(d<f)?f:d;var b=(a<c)?c:a;return{pageWidth:b,pageHeight:e,windowWidth:c,windowHeight:f}};document.getKeyCode=function(a){a=a||window.event;if((typeof a.which=="undefined"||(typeof a.which=="number"&&a.which==0))&&typeof a.keyCode=="number"){return a.keyCode}else{return a.which}};document.getElementPoSi=function(a){var b={top:0,left:0,width:0,height:0};if(!a||typeof(a)!="object"){return b}if(typeof(a.offsetTop)!="undefined"){b.height=a.offsetHeight;b.width=a.offsetWidth;b.left=b.top=0;while(a&&a.tagName!="BODY"){b.top+=parseInt(a.offsetTop);b.left+=parseInt(a.offsetLeft);a=a.offsetParent}}return b};document.getFirstChildByElement=function(d,c,b){if(b&&typeof(b)!="object"){b=[b]}if(d&&d.hasChildNodes()){var e=d.firstChild;while(e!=null){if(e.nodeName.toLowerCase()==c){if(!b){return e}else{var f=","+e.className.split(" ").join(",")+",";for(var a=0;a<b.length;a++){if(f.indexOf(","+b[a]+",")!=-1){return e}}}}e=e.nextSibling}}return null};document.getMousePos=function(b){b=b||window.event;var a=(window.document.compatMode&&window.document.compatMode=="CSS1Compat")?window.document.documentElement:window.document.body;return{top:b.pageY?b.pageY:b.clientY+a.scrollTop-a.clientTop,left:b.pageX?b.pageX:b.clientX+a.scrollLeft-a.clientLeft}};if(typeof String.prototype.trim!="function"){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}String.prototype.containsLineBreak=function(){var a=new RegExp(/(\n|\r|\r\n)./);return a.test(this)};String.prototype.stripslashes=function(){var a=this;a=a.replace(/\\'/g,"'");a=a.replace(/\\"/g,'"');a=a.replace(/\\0/g,"\0");a=a.replace(/\\\\/g,"\\");return a};var ready=new (function(){var g=0,f=document,b=window,c=this,a;c.isReady=0;c.readyList=[];function e(){if(g){return}g=1;if(f.addEventListener){a="DOMContentLoaded";f.addEventListener(a,function(){f.removeEventListener(a,arguments.callee,false);ready.ready()},false)}else{if(f.attachEvent){a="onreadystatechange";f.attachEvent(a,function(){if(f.readyState==="complete"){f.detachEvent(a,arguments.callee);ready.ready()}});if(f.documentElement.doScroll&&b==b.top){(function(){if(c.isReady){return}try{f.documentElement.doScroll("left")}catch(d){setTimeout(arguments.callee,0);return}ready.ready()})()}}}b.onload=ready.ready}c.ready=function(){if(!c.isReady){c.isReady=1;if(c.readyList){for(var d=0;d<c.readyList.length;d++){c.readyList[d].call(b,c)}c.readyList=null}f.loaded=true}};c.push=function(d){e();if(c.isReady){d.call(b,c)}else{c.readyList.push(d)}return c}})();function Query(b,a){a=a||"";var c=b.trim();var d=encodeURIComponent(a.toString().trim());this.toString=function(){return c+"="+d+"&"}}function Request(c,h,a,n,g,p,d,b){p=p?(typeof p=="object"||typeof p=="function"?p:[p]):[];d=d||false;b=b?b:d?"text/xml":"text/plain";n=n||null;var l=false;try{if(window.XMLHttpRequest){l=new XMLHttpRequest()}if(l.overrideMimeType){l.overrideMimeType(b)}else{if(window.ActiveXObject){try{l=new ActiveXObject("Msxml2.XMLHTTP")}catch(o){try{l=new ActiveXObject("Microsoft.XMLHTTP")}catch(r){l=false}}}}}catch(j){l=false}if(!l){if(n&&typeof n[g]=="function"){n[g](false,p)}return}var f="";if(a instanceof Query){f=a.toString()}else{if((typeof a=="object"||typeof a=="function")&&a.length>0){for(var k=0;k<a.length;k++){f+=a[k].toString()}}}f+=new Date().getTime();l.abort();l.onreadystatechange=function(){if(l.readyState==4){if(n&&typeof n[g]=="function"){n[g]((d?l.responseXML:l.responseText),p)}l=false}};if(h.toLowerCase()=="post"){l.open("POST",c,true);l.setRequestHeader("Content-Type","application/x-www-form-urlencoded");l.send(f)}else{l.open("GET",c+"?"+f,true);l.send(null)}}function Sidebar(g){g=g||"";var a=document.getElementById("sidebar")||document.getElementById("bottombar")||false;var f=document.getElementById("sidebarcontent");var e=document.getElementById("sidebartoggle");var c=this;if(!a||!f||!e){return}this.setVisible=function(h){if(h){f.style.display="";e.src=g+settings.hide_sidebar_image;e.className="hide-sidebar"}else{f.style.display="none";e.src=g+settings.show_sidebar_image;e.className="show-sidebar"}};this.isVisible=function(){return f.style.display!="none"};var b=a.getElementsByTagName("a");for(var d=0;d<b.length;d++){if(b[d].href.search(/toggle_sidebar/)!=-1){b[d].onclick=function(h){c.setVisible(!c.isVisible());new Request("index.php","POST",new Query("toggle_sidebar",true));return false}}}}function Thread(h,l){var e=false;if(!isNaN(parseInt(h))){e=h;h=document.getElementById("thread-"+e)}else{var f=new RegExp(/thread-([0-9])+/);var a=f.exec(h.id);if(!a){return}e=a&&a.length>1?a[1]:0}var n=h.getElementsByTagName("li");var m=h.getElementsByTagName("ul");var o=this;var k=new Image();var b=null;if(h.parentNode.nodeName!="TD"){var g=document.getFirstChildByElement(n[0],"span",["tail"]);if(g&&n.length>1){b=document.getFirstChildByElement(g,"span",["replies"]);if(!b){b=document.createElementWithAttributes("span",{className:"replies"},g);b.appendChild(document.createTextNode(" ("+(n.length-1)+")"))}}}this.isFold=function(){return m.length>0&&m[0].style.display=="none"};this.setFold=function(r,q){q=q||false;if(r){k.src=l+settings.expand_thread_image;k.className="expand-thread";k.alt="";k.onerror=function(t){this.alt="[+]"};k.title=lang.expand_fold_thread_linktitle;if(b){b.style.display=""}if(q){h.className=h.className.replace("expanded","folded")}}else{k.src=l+settings.fold_thread_image;k.className="fold-thread";k.alt="";k.onerror=function(t){this.alt="[-]"};k.title=lang.expand_fold_thread_linktitle;if(b){b.style.display="none"}if(q){h.className=h.className.replace("folded","expanded")}}var p=r?"none":"";for(var s=0;s<m.length;s++){m[s].style.display=p}};var c=function(p){if(!p){return}if(n.length>0&&n[0].firstChild){n[0].insertBefore(p,n[0].firstChild)}else{n[0].appendChild(p)}};var d=document.createElementWithAttributes("span",{className:"fold-expand"},null);if(n.length==1){var i=document.createElementWithAttributes("img",{src:l+settings.expand_thread_inactive_image,className:"expand-thread-inactive",alt:"",onerror:function(p){this.alt="[]"}},d);c(d)}else{var j=document.createElementWithAttributes("a",{href:"#",onclick:function(p){o.setFold(!o.isFold());this.blur();return false}},d);this.setFold(this.isFold());j.appendChild(k);c(d)}}function Posting(b){if(!b){return}var d=document.getElementById("headline-"+b);var c=document.getElementById("posting-"+b);var g=document.getElementById("avatar-"+b)||new Image();if(!d||!c){return}var a=this;try{d.style.cursor="pointer"}catch(f){d.style.cursor="hand"}d.title=lang.fold_posting_title;d.onclick=function(h){a.setFold(!a.isFold())};this.isFold=function(){return c.style.display=="none"};this.setFold=function(h){var e=h?"none":"";c.style.display=e;g.style.display=e};this.setFold(this.isFold())}function FullSizeImage(els){if(!els){return}els=(typeof els=="object"||typeof els=="function")&&typeof els.length=="number"?els:[els];var hashTrigger=null;var body=document.body;var isIELower8=
/*@cc_on!@*/
false&&!(document.documentMode&&document.documentMode>=8);var imageCanvas=document.getElementById("image-canvas")||document.createElementWithAttributes("div",{id:"image-canvas"},body);imageCanvas.setVisible=function(enable){this.style.display=enable?"block":"none"};var stopTrigger=function(){if(hashTrigger){window.clearInterval(hashTrigger);var scrollPos=document.getScrollPosition();if(!isIELower8){window.history.back()}else{window.location.hash="GET_OPERA"}window.scrollTo(scrollPos.left,scrollPos.top)}};var oldOnKeyPressFunc=window.document.onkeypress;window.document.onkeypress=function(e){var keyCode=document.getKeyCode(e);if(keyCode==27){imageCanvas.setVisible(false);stopTrigger()}if(typeof oldOnKeyPressFunc=="function"){oldOnKeyPressFunc(e)}};imageCanvas.onclick=function(e){imageCanvas.setVisible(false);stopTrigger()};imageCanvas.setVisible(false);var fullSizeImage=document.getElementById("fullSizeImage")||document.createElementWithAttributes("img",{id:"fullSizeImage"},imageCanvas);for(var i=0;i<els.length;i++){var links=els[i].getElementsByTagName("a");for(var j=0;j<links.length;j++){if(links[j].rel.search(/thumbnail/)!=-1){links[j].onclick=function(e){window.location.hash="image";var currentHash=window.location.hash;fullSizeImage.src=this.href;imageCanvas.setVisible(true);var imgPoSi=document.getElementPoSi(fullSizeImage);var scrollPos=document.getScrollPosition();var winSize=document.getWindowSize();imageCanvas.style.height=winSize.pageHeight+"px";fullSizeImage.style.marginTop=(scrollPos.top+(winSize.windowHeight-imgPoSi.height)/2)+"px";hashTrigger=window.setInterval(function(){if(this.location.hash!=currentHash){imageCanvas.setVisible(false)}},50);return false}}}}}function AjaxPreviewWindow(r,n){var o=n?n:"";var l=false;var a=false;var c=document.getElementById("ajax-preview");var h=this;if(!c){c=document.createElementWithAttributes("div",{id:"ajax-preview"},null);c.style.display="none";document.body.appendChild(c)}c.innerHTML=r.stripslashes().trim();var i=null;var m=0;var b=document.getElementById("ajax-preview-close");var e=document.getElementById("ajax-preview-content");var p=document.getElementById("ajax-preview-main");if(!b||!e||!p){window.alert("AjaxPreviewWindow can not be initialized")}var d=window.document.onmousedown;window.document.onmousedown=function(s){h.closeByOutSideClick(s);if(typeof d=="function"){d(s)}};var q=window.document.onkeypress;window.document.onkeypress=function(t){var s=document.getKeyCode(t);if(s==27){h.setVisible(false)}if(typeof q=="function"){q(t)}};var g=window.document.onmouseover;window.document.onmouseover=function(s){if(!h.isPinned()){h.closeByOutSideClick(s)}if(typeof g=="function"){g(s)}};b.onclick=function(){h.setVisible(false);return false};var f=document.createElementWithAttributes("img",{id:"ajax-preview-throbber",src:o+settings.ajax_preview_throbber_image,alt:"[*]"},e);var k=document.createElementWithAttributes("p",{id:"ajax-preview-replylink-wrapper"},e);var j=document.createElementWithAttributes("a",{id:"ajax-preview-replylink",href:"#"},null);j.appendChild(document.createTextNode(lang.reply_link));k.style.display="none";this.closeByOutSideClick=function(x){var B=document.getElementById("image-canvas");if(h.isVisible()&&B&&B.style.display=="none"){var v=document.getTarget(x);if(v&&v!=h.getOpener().firstChild&&v!=h.getContentElement()&&v!=h.getMainElement()){var u=document.getMousePos(x);var t=u.left;var s=u.top;var A=h.getDocumentPosition().left;var z=h.getDocumentPosition().top;var w=h.getWidth();var y=h.getHeight();if((t<A||t>(A+w)||s<z||s>(z+y))&&v.className!="ap"){h.setVisible(false)}}}};this.pin=function(){a=!a};this.isPinned=function(){return a};this.getContentElement=function(){return e};this.getMainElement=function(){return p};this.hideURI=function(s){l=s};this.setPosition=function(t,v){c.style.left=t+"px";c.style.top=v+"px";var u=this.getWidth();var s=document.getWindowSize().windowWidth;if((t+u)>=s){this.moveHorizontal(s-25-(t+u))}else{this.moveHorizontal(0)}};this.getWidth=function(){return p.offsetWidth};this.getHeight=function(){return c.offsetHeight+p.offsetHeight};this.setOpener=function(s){i=s};this.getOpener=function(){return i};this.isVisible=function(){return c.style.display!="none"};this.getDocumentPosition=function(){var t=c.offsetLeft;var s=c.offsetTop;return{top:s,left:t+m}};this.moveHorizontal=function(s){m=s;p.style.left=s+"px"};this.setVisible=function(s){if(s){c.style.display="block"}else{c.style.display="none";a=false}};this.setText=function(s){e.innerHTML=s;if(s!=""){if(!j.firstChild){j.appendChild(document.createTextNode(lang.reply_link))}if(!l){k.appendChild(j);e.appendChild(k)}new FullSizeImage(e)}else{e.appendChild(f)}};this.setURI=function(s){if(!s){j.href="#";k.style.display="none"}else{k.style.display="block";j.href=s}}}function MyLittleJavaScript(){var s=null;var j=null;var i=null;var u="index.php";var p=[];var b=[];var g=new RegExp(/[?|&]id=([0-9]+)(#p([0-9]+))?/);var l=this;var e=function(v){if(v&&g.test(v.href)){var w=g.exec(v.href);return w[3]?w[3]:w[1]}return false};this.getTemplatePath=function(){if(s!=null){return s}var w=document.getElementsByTagName("link");for(var v=0;v<w.length;v++){if(w[v].rel=="stylesheet"){return w[v].href.substring(0,w[v].href.lastIndexOf("/")+1)}}return""};var n=function(x){var w=document.createElementWithAttributes("a",{pid:x,title:lang.ajax_preview_title,href:u+"?id="+x,onclick:function(y){l.showAjaxPreviewWindow(this,true);this.blur();return false},onmouseover:function(y){l.showAjaxPreviewWindow(this,false);this.blur();return false}},null);var v=document.createElementWithAttributes("img",{src:s+settings.ajax_preview_image,title:lang.ajax_preview_title,alt:"",onload:function(y){this.alt="[…]"},onerror:function(y){this.alt="[…]"}},w);return w};var f=function(w){if(!w||!j){return}var v=e(w);if(v&&w.parentNode){w.parentNode.appendChild(document.createTextNode(String.fromCharCode(160)));w.parentNode.appendChild(n(v))}};var c=function(w){if(!w||!j){return}j.hideURI(true);var x=document.getElementById("postingform");var v=false;if(x&&x.elements.id){v=parseInt(x.elements.id.value)}if(v){w.appendChild(document.createTextNode(String.fromCharCode(160)));w.appendChild(n(v))}};this.selectPosting=function(w,v){var x=v&&(typeof v=="object"||typeof v=="function")&&v.length>0;var A=x?v[0]:w;var z=x?w:false;var y=null;if(!A||!(y=document.getElementById("markimg_"+A))){return}y.src=s+settings.mark_process_image;y.alt="[ ]";var B=[new Query("mode","posting"),new Query("mark",A),new Query("method","ajax")];if(!x){new Request(u,"POST",B,this,"selectPosting",A,true)}else{if(x&&z&&document.getElementById("marklink_"+A)){var C=document.getElementById("marklink_"+A);var D=z.getElementsByTagName("action")&&z.getElementsByTagName("action")[0].firstChild.data=="1";if(D){y.src=s+settings.marked_image;y.alt="[●]";C.title=lang.unmark_linktitle;y.title=lang.unmark_linktitle}else{y.src=s+settings.unmarked_image;y.alt="[○]";C.title=lang.mark_linktitle;y.title=lang.mark_linktitle}}}};var h=function(x){x=x||false;for(var w=0;w<p.length;w++){p[w].setFold(!x,true)}var v=[new Query("fold_threads",x),new Query("ajax","true")];new Request(u,"GET",v)};var t=function(){if(!document.getElementById("subnavmenu")){return}var x=document.getElementById("subnavmenu").getElementsByTagName("a");var y=null;var A=new RegExp(/fold-([0-9])+/);for(var w=0;w<x.length;w++){if(x[w].className.search(A)!=-1){y=x[w];break}}if(y){var z=A.exec(y.className);var v=z.length>1&&z[1]=="1";y.onclick=function(B){h(!v);this.className=this.className.replace(A,"fold-"+(v?2:1));this.firstChild.replaceData(0,this.firstChild.nodeValue.length,(v?lang.expand_threads:lang.fold_threads));this.title=v?lang.expand_threads_linktitle:lang.fold_threads_linktitle;v=!v;this.blur();return false}}};var o=function(z){if(!z){return}t();for(var B=0;B<z.length;B++){var v=z[B];var E=v.parentNode;var y=document.getFirstChildByElement(E,"a",["ap","reply","thread","replynew","threadnew","thread-sticky","threadnew-sticky","reply-search","thread-search"]);var C=parseInt(v.id.substring(1));if(!C){continue}var F=v.getElementsByTagName("a");if(F.length>=2){for(var A=0;A<F.length;A++){if(F[A].href.search(/mark/)!=-1){F[A].pid=C;F[A].onclick=function(G){l.selectPosting(this.pid);this.blur();return false}}else{if(F[A].href.search(/delete_posting/)!=-1){F[A].onclick=function(G){var H=window.confirm(lang.delete_posting_confirm);if(H){this.href+="&delete_posting_confirm=true"}this.blur();return H}}}}}if(y&&j){if(F.length>=1){var D=F[0];v.insertBefore(n(C),D);v.insertBefore(document.createTextNode(String.fromCharCode(160)),D)}else{v.appendChild(document.createTextNode(String.fromCharCode(160)));v.appendChild(n(C))}}if(E.parentNode.className.search(/thread/)!=-1&&E.parentNode.className.search(/[folded|expanded]/)!=-1){p.push(new Thread(E.parentNode,s))}}var x=document.getElementsByClassName("options");if(x.length>0){for(var B=0;B<x.length;B++){var F=x[B].getElementsByTagName("a");if(F.length>0){for(var A=0;A<F.length;A++){if(F[A].href.search(/delete_posting/)!=-1){F[A].onclick=function(G){var H=window.confirm(lang.delete_posting_confirm);if(H){this.href+="&delete_posting_confirm=true"}return H};break}}}}}var w=document.getElementsByClassName("posting");w=w.length>0?w:document.getElementsByClassName("thread-posting");new FullSizeImage(w)};var q=function(x){var v=document.getElementById(x);if(!v){return}var w=(v.alt)?v.alt:v.value;v.onfocus=function(y){if(this.value==w){this.value=""}};v.onblur=function(y){if(this.value.trim()==""){this.value=w}}};var d=function(){if(document.getElementById("content")){var w=document.getElementById("content").getElementsByTagName("form");if(w&&w.length>0){for(var v=0;v<w[0].elements.length;v++){if(w[0].elements[v].type=="text"&&w[0].elements[v].name!="search_user"&&w[0].elements[v].name!="smiley_code"&&w[0].elements[v].name!="new_category"){w[0].elements[v].focus();break}}}}};var a=function(w){w=w||false;for(var v=0;v<b.length;v++){b[v].setFold(!w)}};var k=function(y){if(!y){return}for(var x=0;x<y.length;x++){var z=y[x];var w=parseInt(z.id.substring(1));if(!w){continue}b.push(new Posting(w))}var B=null;if(b.length==0||!(B=document.getElementById("subnavmenu"))){return}var v=document.createElementWithAttributes("li",{},B);var A=document.createElementWithAttributes("a",{isExpand:true,title:lang.fold_postings_title,href:"#",className:"fold-postings"},v);A.appendChild(document.createTextNode(lang.fold_postings));A.onclick=function(C){this.isExpand=!this.isExpand;a(this.isExpand);this.blur();return false}};var m=function(){var A=[[document.getElementById("terms_of_use")||false,settings.terms_of_use_popup_width,settings.terms_of_use_popup_height],[document.getElementById("edit_avatar")||false,settings.avatar_popup_width,settings.avatar_popup_height]];for(var z=0;z<A.length;z++){if(A[z][0]){var C=document.getWindowSize();var x=A[z][1];var B=A[z][2];var v=parseInt(0.5*(C.windowWidth-x));var y=parseInt(0.25*(C.windowHeight-B));A[z][0].onclick=function(w){window.open(this.href,"MyLittleForum","width="+x+",height="+B+",left="+v+",top="+y+",scrollbars,resizable");return false}}}};this.updateAjaxPreviewWindow=function(v){if(v===false||!j){return}var w=v.getElementsByTagName("content");var x=v.getElementsByTagName("locked");x=!x?true:x[0].firstChild.data=="1";w=!w?"":w[0].firstChild.data;if(x){j.setURI(false)}else{if(j.getOpener()&&j.getOpener().pid){j.setURI("index.php?mode=posting&id="+j.getOpener().pid)}}if(w.trim()==""){w="<p>"+lang.no_text+"</p>"}j.setText(w)};this.showAjaxPreviewWindow=function(y,x){if(!y||!j){return}if(y==j.getOpener()&&j.isVisible()&&x){j.pin();if(!j.isPinned()){j.setVisible(false);j.setOpener(null)}}else{if(!j.isPinned()){if(x&&!j.isPinned()){j.pin()}var w=document.getElementPoSi(y);j.setOpener(y);j.setText("");j.setVisible(true);j.setPosition(w.left,w.top);var v=[new Query("mode","entry"),new Query("ajax_preview","true"),new Query("id",y.pid)];new Request(u,"POST",v,this,"updateAjaxPreviewWindow",null,true)}}};this.getAjaxPreviewWindow=function(){return j};var r=function(){var w=document.getElementById("subnav-2");if(w){var z=w.getElementsByTagName("form");for(var y=0;y<z.length;y++){var x=z[y].getElementsByTagName("select");for(var v=0;v<x.length;v++){x[v].f=z[y];x[v].onchange=function(A){this.f.submit();return false}}}}};this.init=function(v){v=v||false;d();q("search-input");q("search-user");s=this.getTemplatePath();if(v){j=new AjaxPreviewWindow(v,s)}f(document.getElementById("user-last-posting"));c(document.getElementById("reply-to"));o(document.getElementsByClassName("tail"));k(document.getElementsByClassName("thread-posting"));m();r();i=new Sidebar(s);if(typeof preload=="object"){document.preloadImages(preload,s)}}}var mlf=null;window.ready.push(function(){mlf=new MyLittleJavaScript();var a=typeof settings!="undefined"&&typeof settings.ajaxPreviewStructure=="string"?settings.ajaxPreviewStructure:false;if(mlf&&typeof lang=="object"){mlf.init(a)}});