document.getStyle=function(b,a){return document.defaultView.getComputedStyle(b,null).getPropertyValue(a)};document.preloadImages=function(a,d){if(typeof a!="object"){a=[a]}d=d||"";var b=[];for(var c=0;c<a.length;c++){b[c]=new Image();b[c].src=d+a[c]}};document.getTarget=function(a){a=a||window.event;return a.target||a.srcElement||false};if(window.Node&&Node.prototype&&!Node.prototype.contains){Node.prototype.contains=function(a){try{return !!(this.compareDocumentPosition(a)&16)}catch(b){return false}}}document.createElementWithAttributes=function(c,b,a){var d=document.createElement(c);for(var e in b){d[e]=b[e]}if(a){a.appendChild(d)}return d};document.getScrollPosition=function(){var a=0,b=0;if(typeof window.pageYOffset=="number"){b=window.pageYOffset;a=window.pageXOffset}return{left:a,top:b}};document.getWindowSize=function(){var a=document.body.scrollWidth;var c=document.body.scrollHeight;var b=window.innerWidth;var d=window.innerHeight;c=c<d?d:c;a=a<b?b:a;return{pageWidth:a,pageHeight:c,windowWidth:b,windowHeight:d}};document.getElementPoSi=function(a){var b={top:0,left:0,width:0,height:0};if(!a||typeof(a)!="object"){return b}if(typeof(a.offsetTop)!="undefined"){b.height=a.offsetHeight;b.width=a.offsetWidth;b.left=b.top=0;while(a&&a.tagName!="BODY"){b.top+=parseInt(a.offsetTop);b.left+=parseInt(a.offsetLeft);a=a.offsetParent}}return b};document.getFirstChildByElement=function(d,c,b){if(b&&typeof(b)!="object"){b=[b]}if(d&&d.hasChildNodes()){var e=d.firstChild;while(e!=null){if(e.nodeName.toLowerCase()==c){if(!b){return e}else{var f=","+e.className.split(" ").join(",")+",";for(var a=0;a<b.length;a++){if(f.indexOf(","+b[a]+",")!=-1){return e}}}}e=e.nextSibling}}return null};document.getMousePosition=function(a){return{top:a.pageY,left:a.pageX}};if(typeof String.prototype.includes!="function"){String.prototype.includes=function(a){return this.indexOf(a)!==-1}}String.prototype.containsLineBreak=function(){var a=new RegExp(/(\n|\r|\r\n)./);return a.test(this)};String.prototype.stripslashes=function(){var a=this;a=a.replace(/\\'/g,"'");a=a.replace(/\\"/g,'"');a=a.replace(/\\0/g,"\0");a=a.replace(/\\\\/g,"\\");return a};function DragAndDropTable(p,l,i){if(!p){return}var e=false;var j=p.tBodies[0].rows;var r=null;var s=window.document.onmouseup;var k=window.document.onmousemove;var b=0;var f=[];var a=function(w){var x=window.document.location.search.substring(1).split("&");if(!x.length){return false}for(var u=0;u<x.length;u++){var t=x[u].split("=");if(decodeURIComponent(t[0])==w){return t.length>1?decodeURIComponent(t[1]):""}}};var g=function(){if(!e){return}var v=a(i);var t=h();if(!v||!t){return}var u=[new Query("mode",l),new Query("action","reorder"),new Query(v,t)];new Request("index.php","POST",u)};var o=function(){for(var t=0;t<j.length;t++){j[t].className=(t%2==0)?"a":"b"}};var h=function(){var t="";for(var u=0;u<j.length;u++){if(j[u].id.length>3){t+=j[u].id.substring(3)+","}}return t.substr(0,t.length-1)};var d=function(t){if(!t){return}};var q=function(t){if(!t){return}o();g()};var c=function(){window.document.onmousemove=function(w){if(typeof k=="function"){k(w)}if(!r){return}var x=document.getMousePosition(w);var u=x.top-r.handlePos.top+r.elementPos.top;var v=n(u);if(b!=u&&v&&r!=v){var t=u>b;b=u;if(t){v=v.nextSibling}r.parentNode.insertBefore(r,v);e=true;d(r)}if(w&&w.preventDefault){w.preventDefault()}return false};window.document.onmouseup=function(t){window.document.onmouseup=window.document.onmousemove=null;if(typeof s=="function"){s(t)}if(typeof k=="function"){window.document.onmousemove=k}q(r);r=null;e=false;return false}};var n=function(w){for(var t=0;t<j.length;t++){var v=document.getElementPoSi(j[t]);var u=v.height;if(u==0&&row[t].firstChild){v=document.getElementPoSi(row[t].firstChild);u=row[t].firstChild.offsetHeight}u/=2;if((w>=(v.top-u))&&(w<(v.top+u))){return j[t]}}return null};var m=function(v){v.classList.add("js-cursor-move");v.title=lang.drag_and_drop_title;v.onmousedown=function(x){e=false;var w=document.getTarget(x);if(w&&w.className.search(/control/)!=-1){return false}this.className="drag";this.elementPos=document.getElementPoSi(this);this.handlePos=document.getMousePosition(x);r=this;c();return false};var t=v.cells[v.cells.length-1].getElementsByTagName("a");if(t&&t.length>0){for(var u=0;u<t.length;u++){if(t[u].href.search(/move_up/)!=-1){t[u].onclick=function(w){v.parentNode.insertBefore(v,j[Math.max(v.rowIndex-2,0)]);e=true;o();g();return false}}else{if(t[u].href.search(/move_down/)!=-1){t[u].onclick=function(w){v.parentNode.insertBefore(v,j[Math.min(v.rowIndex+1,j.length)]);o();e=true;g();return false}}}}}};(function(){for(var t=0;t<j.length;t++){m(j[t])}}())}function Query(b,a){a=a||"";var c=b.trim();var d=encodeURIComponent(a.toString().trim());this.toString=function(){return c+"="+d+"&"}}function Request(d,a,b,m,h,o,f,c){o=o?(typeof o=="object"||typeof o=="function"?o:[o]):[];f=f||false;c=c?c:f?"text/xml":"text/plain";m=m||null;var l=false;try{if(window.XMLHttpRequest){l=new XMLHttpRequest()}if(l.overrideMimeType){l.overrideMimeType(c)}else{if(window.ActiveXObject){try{l=new ActiveXObject("Msxml2.XMLHTTP")}catch(n){try{l=new ActiveXObject("Microsoft.XMLHTTP")}catch(p){l=false}}}}}catch(j){l=false}if(!l){if(m&&typeof m[h]=="function"){m[h](false,o)}return}var g="";if(b instanceof Query){g=b.toString()}else{if((typeof b=="object"||typeof b=="function")&&b.length>0){for(var k=0;k<b.length;k++){g+=b[k].toString()}}}g+=new Date().getTime();l.abort();l.onreadystatechange=function(){if(l.readyState==4){if(m&&typeof m[h]=="function"){m[h]((f?l.responseXML:l.responseText),o)}l=false}};if(a.toLowerCase()=="post"){l.open("POST",d,true);l.setRequestHeader("Content-Type","application/x-www-form-urlencoded");l.send(g)}else{l.open("GET",d+"?"+g,true);l.send(null)}}function Sidebar(f){f=f||"";var a=document.getElementById("sidebar")||document.getElementById("bottombar")||false;var e=document.getElementById("sidebartoggle");var c=this;if(!a||!e){return}this.setVisible=function(g){if(g){a.classList.remove("js-display-fold");e.src=f+settings.hide_sidebar_image;e.classList.remove("show-sidebar");e.classList.add("hide-sidebar")}else{a.classList.add("js-display-fold");e.src=f+settings.show_sidebar_image;e.classList.remove("hide-sidebar");e.classList.add("show-sidebar")}};this.isVisible=function(){return !a.classList.contains("js-display-fold")};var b=a.getElementsByTagName("a");for(var d=0;d<b.length;d++){if(b[d].href.search(/toggle_sidebar/)!=-1){b[d].onclick=function(g){c.setVisible(!c.isVisible());new Request("index.php","POST",new Query("toggle_sidebar",true));return false}}}}function Thread(h,l){var e=false;if(!isNaN(parseInt(h))){e=h;h=document.getElementById("thread-"+e)}else{var f=new RegExp(/thread-([0-9])+/);var a=f.exec(h.id);if(!a){return}e=a&&a.length>1?a[1]:0}var n=h.getElementsByTagName("li");var m=h.getElementsByTagName("ul");var o=this;var k=new Image();var b=null;if(h.parentNode.nodeName!="TD"){var g=document.getFirstChildByElement(n[0],"span",["tail"]);if(g&&n.length>1){b=document.getFirstChildByElement(g,"span",["replies"]);if(!b){b=document.createElementWithAttributes("span",{className:"replies"},g);b.appendChild(document.createTextNode(" ("+(n.length-1)+")"))}}}this.isFold=function(){return m.length>0&&m[0].classList.contains("js-display-none")};this.setFold=function(q,p){p=p||false;if(q){k.src=l+settings.expand_thread_image;k.classList.remove("fold-thread");k.classList.add("expand-thread");k.alt="";k.onerror=function(s){this.alt="[+]"};k.title=lang.expand_fold_thread_linktitle;if(b){b.classList.remove("js-display-none")}if(p){h.classList.remove("expanded");h.classList.add("folded")}}else{k.src=l+settings.fold_thread_image;k.classList.remove("expand-thread");k.classList.add("fold-thread");k.alt="";k.onerror=function(s){this.alt="[-]"};k.title=lang.expand_fold_thread_linktitle;if(b){b.classList.add("js-display-none")}if(p){h.classList.remove("folded");h.classList.add("expanded")}}for(var r=0;r<m.length;r++){if(q){m[r].classList.add("js-display-none")}else{m[r].classList.remove("js-display-none")}}};var c=function(p){if(!p){return}if(n.length>0&&n[0].firstChild){n[0].insertBefore(p,n[0].firstChild)}else{n[0].appendChild(p)}};var d=document.createElementWithAttributes("span",{className:"fold-expand"},null);if(n.length==1){var i=document.createElementWithAttributes("img",{src:l+settings.expand_thread_inactive_image,className:"expand-thread-inactive",alt:"",onerror:function(p){this.alt="[]"}},d);c(d)}else{var j=document.createElementWithAttributes("a",{href:"#",onclick:function(p){o.setFold(!o.isFold());this.blur();return false}},d);this.setFold(this.isFold());j.appendChild(k);c(d)}}function Posting(b){if(!b){return}var d=document.getElementById("p"+b);var c=document.getElementById("headline-"+b);if(!d||!c){return}var a=this;c.classList.add("js-cursor-pointer");c.title=lang.fold_posting_title;c.onclick=function(f){a.setFold(!a.isFold())};this.isFold=function(){return d.classList.contains("js-display-fold")};this.setFold=function(e){if(e){d.classList.add("js-display-fold")}else{d.classList.remove("js-display-fold")}};this.setFold(this.isFold())}function FullSizeImage(c){if(!c){return}c=(typeof c=="object"||typeof c=="function")&&typeof c.length=="number"?c:[c];var d=null;var f=document.body;var h=document.getElementById("image-canvas")||document.createElementWithAttributes("div",{id:"image-canvas"},f);h.setVisible=function(i){if(i){this.classList.remove("js-display-none")}else{this.classList.add("js-display-none")}};var
a=function(){if(d){window.clearInterval(d);var i=document.getScrollPosition();window.history.back();window.scrollTo(i.left,i.top)}};var g=window.document.onkeypress;window.document.onkeypress=function(i){if(i.key=="Esc"){h.setVisible(false);a()}if(typeof g=="function"){g(i)}};h.onclick=function(i){h.setVisible(false);a()};h.setVisible(false);var l=document.getElementById("fullSizeImage")||document.createElementWithAttributes("img",{id:"fullSizeImage"},h);for(var e=0;e<c.length;e++){var k=c[e].getElementsByTagName("a");for(var b=0;b<k.length;b++){if(k[b].rel.search(/thumbnail/)!=-1){k[b].onclick=function(n){window.location.hash="image";var j=window.location.hash;l.src=this.href;h.setVisible(true);var m=document.getElementPoSi(l);var o=document.getScrollPosition();var i=document.getWindowSize();h.style.height=i.pageHeight+"px";l.style.marginTop=(o.top+(i.windowHeight-m.height)/2)+"px";d=window.setInterval(function(){if(this.location.hash!=j){h.setVisible(false)}},50);return false}}}}}function AjaxPreviewWindow(d,o){o=o?o:"";var f=false;var p=false;var i=document.getElementById("ajax-preview");var q=this;if(!i){i=document.createElementWithAttributes("div",{id:"ajax-preview",className:"js-display-none"},null);document.body.appendChild(i)}i.innerHTML=d.stripslashes().trim();var k=null;var m=0;var g=document.getElementById("ajax-preview-close");var b=document.getElementById("ajax-preview-content");var n=document.getElementById("ajax-preview-main");if(!g||!b||!n){console.log("main.js: Fail to init ajax-Elements!")}var j=window.document.onmousedown;window.document.onmousedown=function(r){q.closeByOutSideClick(r);if(typeof j=="function"){j(r)}};var l=window.document.onkeypress;window.document.onkeypress=function(r){if(r.key=="Esc"){q.setVisible(false)}if(typeof l=="function"){l(r)}};if(settings.ajax_preview_onmouseover){var c=window.document.onmouseover;window.document.onmouseover=function(r){if(!q.isPinned()){q.closeByOutSideClick(r)}if(typeof c=="function"){c(r)}}}g.onclick=function(){q.setVisible(false);return false};var a=document.createElementWithAttributes("img",{id:"ajax-preview-throbber",src:o+settings.ajax_preview_throbber_image,alt:"[*]"},b);var h=document.createElementWithAttributes("p",{id:"ajax-preview-replylink-wrapper",className:"js-display-none"},b);var e=document.createElementWithAttributes("a",{id:"ajax-preview-replylink",href:"#"},null);e.appendChild(document.createTextNode(lang.reply_link));this.closeByOutSideClick=function(w){var A=document.getElementById("image-canvas");if(q.isVisible()&&A&&A.classList.contains("js-display-none")){var u=document.getTarget(w);if(u&&u!=q.getOpener().firstChild&&u!=q.getContentElement()&&u!=q.getMainElement()){var t=document.getMousePosition(w);var s=t.left;var r=t.top;var z=q.getDocumentPosition().left;var y=q.getDocumentPosition().top;var v=q.getWidth();var x=q.getHeight();if((s<z||s>(z+v)||r<y||r>(y+x))&&u.className!="ap"){q.setVisible(false)}}}};this.pin=function(){p=!p};this.isPinned=function(){return p};this.getContentElement=function(){return b};this.getMainElement=function(){return n};this.hideURI=function(r){f=r};this.setPosition=function(s,u){i.style.left=s+"px";i.style.top=u+"px";var t=this.getWidth();var r=document.getWindowSize().windowWidth;if((s+t)>=r){this.moveHorizontal(r-25-(s+t))}else{this.moveHorizontal(0)}};this.getWidth=function(){return n.offsetWidth};this.getHeight=function(){return i.offsetHeight+n.offsetHeight};this.setOpener=function(r){k=r};this.getOpener=function(){return k};this.isVisible=function(){return !i.classList.contains("js-display-none")};this.getDocumentPosition=function(){var s=i.offsetLeft;var r=i.offsetTop;return{top:r,left:s+m}};this.moveHorizontal=function(r){m=r;n.style.left=r+"px"};this.setVisible=function(r){if(r){i.classList.remove("js-display-none");i.classList.add("js-display-block")}else{i.classList.remove("js-display-block");i.classList.add("js-display-none");p=false}};this.setText=function(r){b.innerHTML=r;if(r!=""){if(!e.firstChild){e.appendChild(document.createTextNode(lang.reply_link))}if(!f){h.appendChild(e);b.appendChild(h)}new FullSizeImage(b)}else{b.appendChild(a)}};this.setURI=function(r){if(!r){e.href="#";h.classList.remove("js-display-block");h.classList.add("js-display-none")}else{h.classList.remove("js-display-none");h.classList.add("js-display-block");e.href=r}}}function Entry(a){if(!a){return}this.setLinkTarget=function(b,f){var g=a.getElementsByClassName("body");for(var e=0;e<g.length;e++){var c=g[e].getElementsByTagName("a");for(var d=0;d<c.length;d++){if(b.toUpperCase()=="NONE"){c[d].target=""}else{if(b.toUpperCase()=="EXTERNAL"||b.toUpperCase()=="ALL"){if(b.toUpperCase()=="EXTERNAL"&&c[d].href.includes(window.document.location.origin)){continue}c[d].target="_blank"}else{c[d].target=f}}}}}}function MyLittleJavaScript(){var u=null;var k=null;var j=null;var w="index.php";var r=[];var b=[];var g=new RegExp(/[?|&]id=([0-9]+)(#p([0-9]+))?/);var m=this;var e=function(x){if(x&&g.test(x.href)){var y=g.exec(x.href);return y[3]?y[3]:y[1]}return false};this.getTemplatePath=function(){if(u!=null){return u}var y=document.getElementsByTagName("link");for(var x=0;x<y.length;x++){if(y[x].rel=="stylesheet"){return y[x].href.substring(0,y[x].href.lastIndexOf("/")+1)}}return""};var p=function(z){var y=document.createElementWithAttributes("a",{pid:z,title:lang.ajax_preview_title,href:w+"?id="+z,onclick:function(A){m.showAjaxPreviewWindow(this,true);this.blur();return false},onmouseover:function(A){if(settings.ajax_preview_onmouseover){m.showAjaxPreviewWindow(this,false);this.blur()}return false},tabIndex:-1},null);var x=document.createElementWithAttributes("img",{src:u+settings.ajax_preview_image,title:lang.ajax_preview_title,alt:"",onload:function(A){this.alt="[…]"},onerror:function(A){this.alt="[…]"}},y);return y};var f=function(y){if(!y||!k){return}var x=e(y);if(x&&y.parentNode){y.parentNode.appendChild(document.createTextNode(String.fromCharCode(160)));y.parentNode.appendChild(p(x))}};var c=function(y){if(!y||!k){return}k.hideURI(true);var z=document.getElementById("postingform");var x=false;if(z&&z.elements.id){x=parseInt(z.elements.id.value)}if(x){y.appendChild(document.createTextNode(String.fromCharCode(160)));y.appendChild(p(x))}};this.selectPosting=function(y,x){var z=x&&(typeof x=="object"||typeof x=="function")&&x.length>0;var C=z?x[0]:y;var B=z?y:false;var A=null;if(!C||!(A=document.getElementById("markimg_"+C))){return}A.src=u+settings.mark_process_image;A.alt="[ ]";var D=[new Query("mode","posting"),new Query("mark",C),new Query("method","ajax")];if(!z){new Request(w,"POST",D,this,"selectPosting",C,true)}else{if(z&&B&&document.getElementById("marklink_"+C)){var E=document.getElementById("marklink_"+C);var F=B.getElementsByTagName("action")&&B.getElementsByTagName("action")[0].firstChild.data=="1";if(F){A.src=u+settings.marked_image;A.alt="[●]";E.title=lang.unmark_linktitle;A.title=lang.unmark_linktitle}else{A.src=u+settings.unmarked_image;A.alt="[○]";E.title=lang.mark_linktitle;A.title=lang.mark_linktitle}}}};var h=function(z){z=z||false;for(var y=0;y<r.length;y++){r[y].setFold(!z,true)}var x=[new Query("fold_threads",z?"0":"1"),new Query("ajax","true")];new Request(w,"GET",x)};var v=function(){if(!document.getElementById("subnavmenu")){return}var z=document.getElementById("subnavmenu").getElementsByTagName("a");var A=null;var C=new RegExp(/fold-([0-9])+/);for(var y=0;y<z.length;y++){if(z[y].className.search(C)!=-1){A=z[y];break}}if(A){var B=C.exec(A.className);var x=B.length>1&&B[1]=="1";A.onclick=function(D){h(!x);this.className=this.className.replace(C,"fold-"+(x?2:1));this.firstChild.replaceData(0,this.firstChild.nodeValue.length,(x?lang.expand_threads:lang.fold_threads));this.title=x?lang.expand_threads_linktitle:lang.fold_threads_linktitle;x=!x;this.blur();return false}}};var q=function(C){if(!C){return}v();for(var D=0;D<C.length;D++){var x=C[D];var H=x.parentNode;var A=document.getFirstChildByElement(H,"a",["ap","reply","thread","replynew","threadnew","thread-sticky","threadnew-sticky","reply-search","thread-search","thread-locked"]);var F=!!document.getFirstChildByElement(H,"img",["no-text"]);var E=parseInt(x.id.substring(1));if(!E){continue}var I=x.getElementsByTagName("a");if(I.length>=2){for(var B=0;B<I.length;B++){if(I[B].href.search(/mark/)!=-1){I[B].pid=E;I[B].onclick=function(J){m.selectPosting(this.pid);this.blur();return false}}else{if(I[B].href.search(/delete_posting/)!=-1){I[B].onclick=function(J){var K=window.confirm(lang.delete_posting_confirm);if(K){this.href+="&delete_posting_confirm=true"}this.blur();return K}}}}}if(!F&&A&&k){if(I.length>=1){var G=I[0];x.insertBefore(p(E),G);x.insertBefore(document.createTextNode(String.fromCharCode(160)),G)}else{x.appendChild(document.createTextNode(String.fromCharCode(160)));x.appendChild(p(E))}}if(H.parentNode.className.search(/thread/)!=-1&&H.parentNode.className.search(/[folded|expanded]/)!=-1){r.push(new Thread(H.parentNode,u))}}var z=document.getElementsByClassName("options");if(z.length>0){for(var D=0;D<z.length;D++){var I=z[D].getElementsByTagName("a");if(I.length>0){for(var B=0;B<I.length;B++){if(I[B].href.search(/delete_posting/)!=-1){I[B].onclick=function(J){var K=window.confirm(lang.delete_posting_confirm);if(K){this.href+="&delete_posting_confirm=true"}return K};break}}}}}var y=document.getElementsByClassName("posting");y=y.length>0?y:document.getElementsByClassName("thread-posting");new FullSizeImage(y)};var s=function(z){var x=document.getElementById(z);if(!x){return}var
y=(x.alt)?x.alt:x.value;x.onfocus=function(A){if(this.value==y){this.value=""}};x.onblur=function(A){if(this.value.trim()==""){this.value=y}}};var d=function(){var y=document.getElementById("content");if(y){var z=y.getElementsByTagName("form");if(z&&z.length>0){for(var x=0;x<z[0].elements.length;x++){if(z[0].elements[x].type=="text"&&z[0].elements[x].name!="search_user"&&z[0].elements[x].name!="smiley_code"&&z[0].elements[x].name!="new_category"){z[0].elements[x].focus();break}}}}};var o=function(){if(document.getElementById("content")){var C=document.getElementById("content").getElementsByTagName("form");if(C&&C.length>0){var D=[];for(var A=0;A<C.length;A++){var y=C[A].getElementsByTagName("input");for(var z=0;z<y.length;z++){if(y[z].type=="password"){var B=y[z];var x=document.createElementWithAttributes("input",{type:"checkbox",checked:false,value:false,field:B,title:lang.show_password_title},B.parentNode);x.onclick=function(F){var E=this.field.type=="text";this.value=E;this.title=E?lang.show_password_title:lang.hide_password_title;this.field.type=E?"password":"text"}}}}}}};var a=function(y){y=y||false;for(var x=0;x<b.length;x++){b[x].setFold(!y)}};var l=function(A){if(!A){return}for(var z=0;z<A.length;z++){var B=A[z];var y=parseInt(B.id.substring(1));if(!y){continue}b.push(new Posting(y))}var D=null;if(b.length==0||!(D=document.getElementById("subnavmenu"))){return}var x=document.createElementWithAttributes("li",{},D);var C=document.createElementWithAttributes("a",{isExpand:true,title:lang.fold_postings_title,href:"#",className:"fold-postings"},x);C.appendChild(document.createTextNode(lang.fold_postings));C.onclick=function(E){this.isExpand=!this.isExpand;a(this.isExpand);this.blur();return false}};var n=function(){var B=[[document.getElementById("terms_of_use")||false,settings.terms_of_use_popup_width,settings.terms_of_use_popup_height],[document.getElementById("data_privacy_statement")||false,settings.terms_of_use_popup_width,settings.terms_of_use_popup_height],[document.getElementById("edit_avatar")||false,settings.avatar_popup_width,settings.avatar_popup_height]];for(var A=0;A<B.length;A++){if(B[A][0]){var D=document.getWindowSize();var y=B[A][1];var C=B[A][2];var x=parseInt(0.5*(D.windowWidth-y));var z=parseInt(0.25*(D.windowHeight-C));B[A][0].onclick=function(E){window.open(this.href,"MyLittleForum","width="+y+",height="+C+",left="+x+",top="+z+",scrollbars,resizable");return false}}}};this.updateAjaxPreviewWindow=function(x){if(x===false||!k){return}var y=x.getElementsByTagName("content");var z=x.getElementsByTagName("locked");z=!z?true:z[0].firstChild.data=="1";y=!y?"":y[0].firstChild.data;if(z){k.setURI(false)}else{if(k.getOpener()&&k.getOpener().pid){k.setURI("index.php?mode=posting&id="+k.getOpener().pid)}}if(y.trim()==""){y="<p>"+lang.no_text+"</p>"}k.setText(y)};this.showAjaxPreviewWindow=function(A,z){if(!A||!k){return}if(A==k.getOpener()&&k.isVisible()&&z){k.pin();if(!k.isPinned()){k.setVisible(false);k.setOpener(null)}}else{if(!k.isPinned()){if(z&&!k.isPinned()){k.pin()}var y=document.getElementPoSi(A);k.setOpener(A);k.setText("");k.setVisible(true);k.setPosition(y.left,y.top);var x=[new Query("mode","entry"),new Query("ajax_preview","true"),new Query("id",A.pid)];new Request(w,"POST",x,this,"updateAjaxPreviewWindow",null,true)}}};this.getAjaxPreviewWindow=function(){return k};var t=function(){var y=document.getElementById("subnav-2");if(y){var B=y.getElementsByTagName("form");for(var A=0;A<B.length;A++){var z=B[A].getElementsByTagName("select");for(var x=0;x<z.length;x++){z[x].f=B[A];z[x].onchange=function(C){this.f.submit();return false}}}}};var i=function(){var C=document.getElementById("content");if(!C){return}var y="DEFAULT";var x="";if(typeof user_settings=="object"&&typeof user_settings.open_links_in_new_window=="string"){y=user_settings.open_links_in_new_window}if(typeof settings=="object"&&typeof settings.forum_based_link_target=="string"){x=settings.forum_based_link_target}if(y!="DEFAULT"||x!=""){var A=C.getElementsByClassName("posting");A=A.length>0?A:C.getElementsByClassName("thread-posting");A=(typeof A=="object"||typeof A=="function")&&typeof A.length=="number"?A:[A];for(var z=0;z<A.length;z++){var B=new Entry(A[z]);B.setLinkTarget(y,x)}}};this.init=function(x){x=x||false;d();s("search-input");s("search-user");u=this.getTemplatePath();if(x){k=new AjaxPreviewWindow(x,u)}f(document.getElementById("user-last-posting"));c(document.getElementById("reply-to"));q(document.getElementsByClassName("tail"));i();l(document.getElementsByClassName("thread-posting"));n();t();j=new Sidebar(u);o();if(typeof preload=="object"){document.preloadImages(preload,u)}}}document.addEventListener("DOMContentLoaded",function(c){var b=new MyLittleJavaScript();var a=typeof settings!="undefined"&&typeof settings.ajaxPreviewStructure=="string"?settings.ajaxPreviewStructure:false;if(b&&typeof lang=="object"){b.init(a)}new DragAndDropTable(document.getElementById("sortable"),"bookmarks","mode","admin","action")});